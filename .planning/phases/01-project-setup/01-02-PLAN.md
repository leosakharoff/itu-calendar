# Plan 01-02: Supabase Project Setup

## Objective
Create Supabase project, define database schema for courses and events, configure environment variables.

## Context
- @.planning/BRIEF.md — data model requirements
- @01-01-SUMMARY.md — project scaffolded

## Tasks

### Task 1: Create Supabase Project
- **Type**: setup
- **checkpoint:human-action**: User must create project at supabase.com (no CLI for initial project creation)
- **Action**:
  1. Go to https://supabase.com/dashboard
  2. Create new project named "itu-calendar"
  3. Note the project URL and anon key
- **Done**: Project created, credentials available

### Task 2: Create Database Schema
- **Type**: database
- **Action**: Run SQL in Supabase SQL Editor:
  ```sql
  -- Courses table
  CREATE TABLE courses (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    name TEXT NOT NULL,
    color TEXT NOT NULL DEFAULT '#4CAF50',
    active BOOLEAN DEFAULT true,
    created_at TIMESTAMPTZ DEFAULT NOW()
  );

  -- Events table
  CREATE TABLE events (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    course_id UUID REFERENCES courses(id) ON DELETE CASCADE,
    title TEXT NOT NULL,
    date DATE NOT NULL,
    type TEXT NOT NULL CHECK (type IN ('lecture', 'deliverable', 'exam', 'presentation', 'holiday')),
    created_at TIMESTAMPTZ DEFAULT NOW()
  );

  -- Allow public access (personal calendar, no auth needed)
  ALTER TABLE courses ENABLE ROW LEVEL SECURITY;
  ALTER TABLE events ENABLE ROW LEVEL SECURITY;

  CREATE POLICY "Allow all on courses" ON courses FOR ALL USING (true);
  CREATE POLICY "Allow all on events" ON events FOR ALL USING (true);
  ```
- **Verify**: Tables visible in Supabase Table Editor
- **Done**: Schema created with RLS policies

### Task 3: Configure Environment Variables
- **Type**: config
- **Files**: `.env.local`, `.gitignore`
- **Action**:
  - Create `.env.local` with Supabase credentials
  - Ensure `.env.local` is in `.gitignore`
- **Verify**: `.env.local` exists and is gitignored
- **Done**: Environment configured

## Verification
- [ ] Supabase project exists
- [ ] `courses` and `events` tables created
- [ ] `.env.local` contains `VITE_SUPABASE_URL` and `VITE_SUPABASE_ANON_KEY`
- [ ] `.env.local` is gitignored

## Success Criteria
Database ready to accept courses and events data.

## Output
Create `01-02-SUMMARY.md` with schema details and verification status.
